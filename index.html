<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <title>Justin's Stuff</title>

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
  <div class="page">
    <h1 class="hero-title">Justin Troth's Stuff</h1>

    <article class="container">
      <h2>My Interests!</h2>
      <p>Cities and transportation</p>
      <p>Electrical and computer engineering</p>
      <p>Japanese language</p>
      <p>Running</p>

      <p>Some of my favorite places!</p>

      <div class="page">
        <div class="fullscreen-overlay"></div>

        <div class="slideshow-container">
          <div class="slideshow"></div>
          <button class="prev">&lt;</button>
          <button class="next">&gt;</button>
          <button class="fullscreen">â¤¢</button>
          <button class="exit-btn">&times;</button>

          <div class="slideshow-caption">
            <h3 id="captionTitle">Title</h3>
            <p id="captionDesc">Description goes here.</p>
          </div>
        </div>

        <!-- Gray overlay -->
        <div class="fullscreen-overlay"></div>
      </div>

      <model-viewer src="Business_Card_Project/JT_Business_Card_v3.2.glb" alt="PCB 3D" auto-rotate camera-controls ar>
      </model-viewer>
    </article>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const images = [];
      for (let i = 1; i <= 10; i++) {
        images.push(`Cities_Photos/photo${i}.JPEG`);
      }

      const slide = document.querySelector('.slideshow');
      const prevBtn = document.querySelector('.prev');
      const nextBtn = document.querySelector('.next');
      const fullscreenBtn = document.querySelector(".fullscreen");
      const slideshow = document.querySelector(".slideshow-container");
      const exitBtn = slideshow.querySelector(".exit-btn");
      
      let paused = false;
      let current = 0;
      let interval;

      // Preload images
      images.forEach(src => new Image().src = src);

      const captionTitle = document.getElementById("captionTitle");
      const captionDesc = document.getElementById("captionDesc");

      // Example: store captions for each image
      const captions = [
        { title: "City 1", desc: "Description for city 1" },
        { title: "City 2", desc: "Description for city 2" },
        { title: "City 3", desc: "Description for city 3" },
        { title: "City 4", desc: "Description for city 4" },
        { title: "City 5", desc: "Description for city 5" },
        { title: "City 6", desc: "Description for city 6" },
        { title: "City 7", desc: "Description for city 7" },
        { title: "City 8", desc: "Description for city 8" },
        { title: "City 9", desc: "Description for city 9" },
        { title: "City 10", desc: "Description for city 10" },
      ];

      function showSlide(index) {
        slide.style.opacity = 0;
        setTimeout(() => {
          slide.style.backgroundImage = `url(${images[index]})`;
          slide.style.opacity = 1;
          current = index;

          // Update caption
          captionTitle.textContent = captions[index].title;
          captionDesc.textContent = captions[index].desc;
        }, 500);
      }

      function nextSlide() {
        showSlide((current + 1) % images.length);
      }

      function prevSlide() {
        showSlide((current - 1 + images.length) % images.length);
      }

      function startInterval() {
        interval = setInterval(nextSlide, 20000);
      }

      function resetInterval() {
        if (!paused)  {
          clearInterval(interval);
          startInterval();
        }
      }

      function pauseSlideshow() {
        clearInterval(interval);
        paused = true;
      }

      function resumeSlideshow() {
        startInterval();
        paused = false;
      }

      function expandSlideshow() {
        slideshow.classList.add("expanded");
        pauseSlideshow();
      }

      function closeSlideshow() {
        slideshow.classList.remove("expanded");
        resumeSlideshow();
      }

      // Initial display
      showSlide(current);
      startInterval();

      // Button events
      nextBtn.addEventListener('click', () => { nextSlide(); resetInterval(); });
      prevBtn.addEventListener('click', () => { prevSlide(); resetInterval(); });
      fullscreenBtn.addEventListener("click", () => expandSlideshow());
      exitBtn.addEventListener("click", closeSlideshow);

      const overlay = document.querySelector(".fullscreen-overlay");

      function expandSlideshow() {
        slideshow.classList.add("expanded");
        overlay.style.display = "block";
        pauseSlideshow();
      }

      function closeSlideshow() {
        slideshow.classList.remove("expanded");
        overlay.style.display = "none";
        resumeSlideshow();
      }

      // ESC key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && slideshow.classList.contains("expanded")) {
          closeSlideshow();
        }
      });
    });

  </script>
</body>

</html>